<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>My Project: CentralStorage Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">My Project
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a>  </div>
  <div class="headertitle">
<div class="title">CentralStorage Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<!-- doxytag: class="CentralStorage" -->
<p>Class storing all images of all robots, global maps (pose graph and point cloud)  
 <a href="classCentralStorage.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="CentralStorage_8h_source.html">CentralStorage.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for CentralStorage:</div>
<div class="dyncontent">
<div class="center"><img src="classCentralStorage__coll__graph.png" border="0" usemap="#CentralStorage_coll__map" alt="Collaboration graph"/></div>
<map name="CentralStorage_coll__map" id="CentralStorage_coll__map">
<area shape="rect" id="node2" href="classPoseGraph.html" title="{PoseGraph\n|+ nodes\l+ edges\l|+ PoseGraph()\l+ ~PoseGraph()\l+ clear()\l}" alt="" coords="5,58,120,195"/><area shape="rect" id="node4" href="classKalmanFilterScale.html" title="{KalmanFilterScale\n||+ KalmanFilterScale()\l+ ~KalmanFilterScale()\l# makeA()\l# makeH()\l# makeV()\l# makeR()\l# makeW()\l# makeQ()\l# makeProcess()\l# makeMeasure()\l}" alt="" coords="144,6,299,247"/></map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>

<p><a href="classCentralStorage-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCentralStorage.html#a25eac5394f0f460badecfda39c287249">CentralStorage</a> (int nbrRobotsInput, int nbrVisWordsInput)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor setting initial values to member variables and initializing detector, extractor, matcher and BOWKMeansTrainer.  <a href="#a25eac5394f0f460badecfda39c287249"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCentralStorage.html#a02c77a753e14f274385b5df7cfee2f1f">~CentralStorage</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCentralStorage.html#aed7b4357ce0cb743a5c8074b805b51a5">generateVocabulary</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Member function generating vocabulatory (dictionary/ visual words/ ...) and outputting it in "vocab.yml", also saves all descriptors (SURF) of all robots in "trainDescriptors_allRobots.yml".  <a href="#aed7b4357ce0cb743a5c8074b805b51a5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCentralStorage.html#a925c5d072478a869cc511e11cbe9248d">computeTrainBOWDescriptors</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCentralStorage.html#a76ea5d6aa74f139a4db824b679958ce2">generateCLTree</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Member function generating chow liu tree and outputting it in "cltree.yml".  <a href="#a76ea5d6aa74f139a4db824b679958ce2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCentralStorage.html#a7e6a32a86c37de7871884670cf97d598">searchForGoodMatch</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCentralStorage.html#a76c399f09dc7d0083508c1a14f8dd8f3">findTrafoInitialGuess</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Member function calculating an initial guess for the pose of one camera relative to the other camera of two matched images based on matched keypoints The result of running, namely pTestQuery (p2nd1st), is stored in storage-&gt;iGMap[queryImgCtr].  <a href="#a76c399f09dc7d0083508c1a14f8dd8f3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCentralStorage.html#aac60399a1652a2e63e3efd01d4758a1e">findTrafo</a> (Eigen::Matrix4f iG, Eigen::Matrix4f &amp;finalTrafo)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Member function calculating an the pose of one camera relative to the other camera of two matched images based icp with the initial Guess calculated in findTrafoInitialGuess The result of running, namely pTestQuery (p2nd1st), is stored in ????  <a href="#aac60399a1652a2e63e3efd01d4758a1e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCentralStorage.html#a250829100ab52dc84a71997246870a69">estimateScale</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCentralStorage.html#ac065c164a68a24bb1d5e0ff0b9a41f84">updatePtCls</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCentralStorage.html#ad0e2f8a4581fe0e61a49b07141442dd2">updatePosesOfRobots</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCentralStorage.html#a90df91c64ab74dfa7d557f08a27a9cdf">clearData</a> ()</td></tr>
<tr><td colspan="2"><h2><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCentralStorage.html#a83a67f52de30d339d872138243d42764">nbrRobots</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">image_geometry::PinholeCameraModel&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCentralStorage.html#adfcd7e35336daa5d959f783c9180460f">camModel</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCentralStorage.html#ac721895aafa60a4fb37c9659aabaed7a">stopDataCollection</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cv::Mat&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCentralStorage.html#ad574732df5058d95d650c1187a9ba4f6">trainDescriptors_allRobots</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">vector&lt; vector&lt; KeyPoint &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCentralStorage.html#a6eba28072f558f36c2b3a08170f9db74">trainKPts_allRobots</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">vector&lt; cv::Mat &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCentralStorage.html#a673208fa43bab02c4e53077ae45a38e7">trainImgs_allRobots</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCentralStorage.html#a6830253bfbd8a4c03cc317820358d25a">nbrVisWords</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cv::Mat&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCentralStorage.html#a50f04d43d8c1f26725bb2e2e560a494c">vocabulary</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cv::Mat&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCentralStorage.html#ad22679ec76d8fc9c99226a1bfdd4c410">trainBOWDescriptors_allRobots</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cv::Mat&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCentralStorage.html#a5d9e98c4102f50187f6a034a99ef9793">clTree</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">BOWKMeansTrainer *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCentralStorage.html#aa30a8d753544480abd495023cbf62a2f">BOWTrainer</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">Ptr&lt; FeatureDetector &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCentralStorage.html#a3853e38f8eadbe09da6a1855b29704f7">detector</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">Ptr&lt; DescriptorExtractor &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCentralStorage.html#a8c18048b9cf9171a16d6d9e2fa8f8754">extractor</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">Ptr&lt; DescriptorMatcher &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCentralStorage.html#a8ff5fb67a41c196b5677015e09ff33be">matcher</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">BOWImgDescriptorExtractor *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCentralStorage.html#ab1828f1368902fab93265328a6e53063">bide</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">Ptr&lt; of2::FabMap &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCentralStorage.html#a4172d4d2a8509cb0bfbdb4edc8a3707b">fabmap</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::map&lt; int, <a class="el" href="structkeyFrame.html">keyFrame</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCentralStorage.html#ab477c78726c58cba1b5b14255700ff64">kFrames</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::map&lt; int, std::pair&lt; int, <br class="typebreak"/>
pcl::PointCloud&lt; pcl::PointXYZ &gt; &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCentralStorage.html#a98df05b89e7956601eeff266fbef0754">ptCls</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">the key for accessing a ptCls corresponds to the the kFrames identity number (ImgCtr), the std::pair contains the associated rID and the actual PtCl  <a href="#a98df05b89e7956601eeff266fbef0754"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::map&lt; int, std::pair&lt; int, <br class="typebreak"/>
pcl::PointCloud&lt; pcl::PointXYZ &gt; &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCentralStorage.html#ac162077a92cd58a58d19ae7404719490">ptClsInGlobalWorldCOS</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::map&lt; int, bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCentralStorage.html#a6b25259119c01d07da15d4e5c9f806f8">ptClsInGlobalWorldCOSUpdated</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::map&lt; int, std::pair&lt; int, <br class="typebreak"/>
geometry_msgs::PoseStamped &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCentralStorage.html#a9f86101c4abfa538b14ecafbbffb49e8">localPoses</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::map&lt; int, std::pair&lt; int, <br class="typebreak"/>
float &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCentralStorage.html#a77f707a32dbf4d3b76668d2bdb2db060">localScales</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Saves the scales for all robots and all images. IMPORTANT NOTE: only the latest scale is needed for each robot!!!! (current storage-&gt;testImgCtr!!!) &lt;-- Maybe not true (see LSD SLAM 3.5 scale for each keyframe)  <a href="#a77f707a32dbf4d3b76668d2bdb2db060"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classKalmanFilterScale.html">KalmanFilterScale</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCentralStorage.html#af952071a5b552f94e01d8667227bfa57">filter</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::map&lt; int, float &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCentralStorage.html#a017fa3b55ed277d63df2a0937be0ead7">robotScales</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::map&lt; int, Eigen::Matrix4f &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCentralStorage.html#ae701316885fe7f1366f17ec44393b84b">pRobotsWorld</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::map&lt; int, <a class="el" href="classPoseGraph.html">PoseGraph</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCentralStorage.html#a872f54468c1ac5aa5438d3c820cfc5bd">localPoseGraphs</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">the key for accessing the localPoseGraph corresponding to a robot is the corresponding robot ID rID  <a href="#a872f54468c1ac5aa5438d3c820cfc5bd"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classPoseGraph.html">PoseGraph</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCentralStorage.html#a710a94a5fbcb985594717f0864405872">globalPoseGraph</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">all local PoseGraphs added together  <a href="#a710a94a5fbcb985594717f0864405872"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cv::Mat&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCentralStorage.html#ab3aae9d93bbccd2a646330cb8812824f">testBOWDescriptors_allRobots</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCentralStorage.html#ac6ecd35e9f6a9d0145f87fb98c6fb923">testImgCtr</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">vector&lt; of2::IMatch &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCentralStorage.html#af2ce7451320774bb90db744fa46493bd">matches</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCentralStorage.html#a311e52441ce3ca79a2eac623c58221cc">boolMatch</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::pair&lt; int, int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCentralStorage.html#a393e5d052d921122176d0ebf0a6cfadb">matchedKeyFrames</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::map&lt; int, std::pair&lt; int, <br class="typebreak"/>
int &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCentralStorage.html#a8382babfd80ae718d4f15ddfa5ef5017">matchedKeyFramesMap</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">key is the nbr of the queryImg (ImgCtr) --&gt; access kFrame: storage-&gt;kFrames[ matchedKeyFramesMap[nbr].first ], storage-&gt;kFrames[ matchedKeyFramesMap[nbr].second ]  <a href="#a8382babfd80ae718d4f15ddfa5ef5017"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::map&lt; int, std::pair<br class="typebreak"/>
&lt; Eigen::Matrix4f, int &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCentralStorage.html#a3ae59bfa3849b3dd984c636e0a9af23a">iGMap</a></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Class storing all images of all robots, global maps (pose graph and point cloud) </p>

<p>Definition at line <a class="el" href="CentralStorage_8h_source.html#l00078">78</a> of file <a class="el" href="CentralStorage_8h_source.html">CentralStorage.h</a>.</p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a25eac5394f0f460badecfda39c287249"></a><!-- doxytag: member="CentralStorage::CentralStorage" ref="a25eac5394f0f460badecfda39c287249" args="(int nbrRobotsInput, int nbrVisWordsInput)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char <a class="el" href="classCentralStorage.html#a25eac5394f0f460badecfda39c287249">CentralStorage::CentralStorage</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nbrRobotsInput</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nbrVisWordsInput</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Constructor setting initial values to member variables and initializing detector, extractor, matcher and BOWKMeansTrainer. </p>

<p>Definition at line <a class="el" href="CentralStorage_8cpp_source.html#l00008">8</a> of file <a class="el" href="CentralStorage_8cpp_source.html">CentralStorage.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                                       :
                <a class="code" href="classCentralStorage.html#a83a67f52de30d339d872138243d42764">nbrRobots</a>(nbrRobotsInput),
                <a class="code" href="classCentralStorage.html#a6830253bfbd8a4c03cc317820358d25a">nbrVisWords</a>(nbrVisWordsInput),
                <a class="code" href="classCentralStorage.html#ac6ecd35e9f6a9d0145f87fb98c6fb923">testImgCtr</a>(0),
                <a class="code" href="classCentralStorage.html#ac721895aafa60a4fb37c9659aabaed7a">stopDataCollection</a>(<span class="keyword">false</span>)
                {
<span class="comment">//      // Init camera Matrix and distortion coefficients</span>
<span class="comment">//      //float camMatArr[3][3] = {{442.777026, 0, 291.591624},{0, 444.581889, 207.395871},{0, 0, 1}};</span>
<span class="comment">//      //float distCoeffsArr[5] = {-0.343887, 0.100088, -0.001316, -0.000163, 0};</span>
<span class="comment">//      //camMat = Mat(3,3,CV_32FC1,camMatArr);</span>
<span class="comment">//      //distCoeffs = Mat(5,1,CV_32FC1,distCoeffsArr);</span>



        <span class="comment">// Detector, Extractor, Matcher, BOW Img Descriptor, BOW KMeans trainer</span>
    <span class="comment">//detector = new DynamicAdaptedFeatureDetector(AdjusterAdapter::create(&quot;SURF&quot;),150,250,4); //</span>
        <span class="comment">//detector = new DynamicAdaptedFeatureDetector(AdjusterAdapter::create(&quot;SIFT&quot;),400,500,5); //</span>
        <span class="comment">//detector = new SiftFeatureDetector(0, 1, 1, 5, 0.9); // nfeatures, noctavelayers,contrastthreshold (higher-&gt;less features), edgethreshold (higher-&gt;more features) ,sigma</span>
        <a class="code" href="classCentralStorage.html#a3853e38f8eadbe09da6a1855b29704f7">detector</a> = <span class="keyword">new</span> SiftFeatureDetector(0, 4, 0.04, 10, 1.0); <span class="comment">// nfeatures, noctavelayers,contrastthreshold (higher-&gt;less features), edgethreshold (higher-&gt;more features) ,sigma</span>

<span class="comment">//detector = new SiftFeatureDetector(0, 3, 0.15, 5, 0.9);0, 3, 0.15, 5, 0.9</span>

        <span class="comment">//extractor = new SurfDescriptorExtractor(500,4,2,false,true); //hessian threshold, noctave,noctavelayers,extended,upright</span>
        <a class="code" href="classCentralStorage.html#a8c18048b9cf9171a16d6d9e2fa8f8754">extractor</a> = <span class="keyword">new</span> SiftDescriptorExtractor(); <span class="comment">//hessian threshold, noctave,noctavelayers,extended,upright</span>
        <a class="code" href="classCentralStorage.html#a8ff5fb67a41c196b5677015e09ff33be">matcher</a> = DescriptorMatcher::create(<span class="stringliteral">&quot;FlannBased&quot;</span>);
        <a class="code" href="classCentralStorage.html#ab1828f1368902fab93265328a6e53063">bide</a> =  <span class="keyword">new</span> BOWImgDescriptorExtractor(<a class="code" href="classCentralStorage.html#a8c18048b9cf9171a16d6d9e2fa8f8754">extractor</a>, <a class="code" href="classCentralStorage.html#a8ff5fb67a41c196b5677015e09ff33be">matcher</a>);
        <span class="comment">// clustering (nbr clusters = nbr vis words)</span>
        <span class="comment">//define Term Criteria</span>
        TermCriteria tc(CV_TERMCRIT_ITER,100,0.001);
        <span class="comment">//retries number</span>
        <span class="keywordtype">int</span> retries=1;
        <span class="comment">//necessary flags</span>
        <span class="keywordtype">int</span> flags=KMEANS_PP_CENTERS;
        <a class="code" href="classCentralStorage.html#aa30a8d753544480abd495023cbf62a2f">BOWTrainer</a> = <span class="keyword">new</span> BOWKMeansTrainer(<a class="code" href="classCentralStorage.html#a6830253bfbd8a4c03cc317820358d25a">nbrVisWords</a>,tc,retries,flags);

        <span class="comment">// Initializing Kalman Filter for scale estimation</span>
        KalmanFilterScale::Vector x(1);
        x(1) = 1.0;
        <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">float</span> _P0[] = {10.0};
        KalmanFilterScale::Matrix P0(1,1,_P0);
        <a class="code" href="classCentralStorage.html#af952071a5b552f94e01d8667227bfa57">filter</a>.init(x,P0);

        <span class="comment">// Initialize global Transforms with identity transform and initialize ptClsUpdated to true</span>
        <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=1; i&lt;=<a class="code" href="classCentralStorage.html#a83a67f52de30d339d872138243d42764">nbrRobots</a>; ++i) {
                <a class="code" href="classCentralStorage.html#ae701316885fe7f1366f17ec44393b84b">pRobotsWorld</a>[i] = Eigen::Matrix4f::Identity(4,4);
                <a class="code" href="classCentralStorage.html#a6b25259119c01d07da15d4e5c9f806f8">ptClsInGlobalWorldCOSUpdated</a>[i] = <span class="keyword">false</span>;
                <a class="code" href="classCentralStorage.html#a017fa3b55ed277d63df2a0937be0ead7">robotScales</a>[i] = 1.0;
        }

}
</pre></div>
</div>
</div>
<a class="anchor" id="a02c77a753e14f274385b5df7cfee2f1f"></a><!-- doxytag: member="CentralStorage::~CentralStorage" ref="a02c77a753e14f274385b5df7cfee2f1f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classCentralStorage.html#a02c77a753e14f274385b5df7cfee2f1f">CentralStorage::~CentralStorage</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CentralStorage_8cpp_source.html#l00059">59</a> of file <a class="el" href="CentralStorage_8cpp_source.html">CentralStorage.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{}
</pre></div>
</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a90df91c64ab74dfa7d557f08a27a9cdf"></a><!-- doxytag: member="CentralStorage::clearData" ref="a90df91c64ab74dfa7d557f08a27a9cdf" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classCentralStorage.html#a90df91c64ab74dfa7d557f08a27a9cdf">CentralStorage::clearData</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CentralStorage_8cpp_source.html#l00479">479</a> of file <a class="el" href="CentralStorage_8cpp_source.html">CentralStorage.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                               {
        this-&gt;<a class="code" href="classCentralStorage.html#ab477c78726c58cba1b5b14255700ff64">kFrames</a>.clear();

        this-&gt;<a class="code" href="classCentralStorage.html#a98df05b89e7956601eeff266fbef0754" title="the key for accessing a ptCls corresponds to the the kFrames identity number (ImgCtr), the std::pair contains the associated rID and the actual PtCl">ptCls</a>.clear();
        this-&gt;<a class="code" href="classCentralStorage.html#ac162077a92cd58a58d19ae7404719490">ptClsInGlobalWorldCOS</a>.clear();
        this-&gt;<a class="code" href="classCentralStorage.html#a6b25259119c01d07da15d4e5c9f806f8">ptClsInGlobalWorldCOSUpdated</a>.clear();

        this-&gt;<a class="code" href="classCentralStorage.html#a9f86101c4abfa538b14ecafbbffb49e8">localPoses</a>.clear();
        this-&gt;<a class="code" href="classCentralStorage.html#a77f707a32dbf4d3b76668d2bdb2db060" title="Saves the scales for all robots and all images. IMPORTANT NOTE: only the latest scale is needed for e...">localScales</a>.clear();
        this-&gt;<a class="code" href="classCentralStorage.html#a017fa3b55ed277d63df2a0937be0ead7">robotScales</a>.clear();

        this-&gt;<a class="code" href="classCentralStorage.html#ae701316885fe7f1366f17ec44393b84b">pRobotsWorld</a>.clear();
        this-&gt;<a class="code" href="classCentralStorage.html#a872f54468c1ac5aa5438d3c820cfc5bd" title="the key for accessing the localPoseGraph corresponding to a robot is the corresponding robot ID rID...">localPoseGraphs</a>.clear();

        <a class="code" href="classCentralStorage.html#a710a94a5fbcb985594717f0864405872" title="all local PoseGraphs added together">globalPoseGraph</a>.<a class="code" href="classPoseGraph.html#a983f26181ccdcacdfa2e399ff6ce76bd">clear</a>();

        this-&gt;<a class="code" href="classCentralStorage.html#ab3aae9d93bbccd2a646330cb8812824f">testBOWDescriptors_allRobots</a>.release();
        this-&gt;<a class="code" href="classCentralStorage.html#ac6ecd35e9f6a9d0145f87fb98c6fb923">testImgCtr</a> = 0;

        this-&gt;<a class="code" href="classCentralStorage.html#af2ce7451320774bb90db744fa46493bd">matches</a>.clear();
        this-&gt;<a class="code" href="classCentralStorage.html#a311e52441ce3ca79a2eac623c58221cc">boolMatch</a> = <span class="keyword">false</span>;
        this-&gt;<a class="code" href="classCentralStorage.html#a393e5d052d921122176d0ebf0a6cfadb">matchedKeyFrames</a> = std::make_pair(-1,-1);
        this-&gt;<a class="code" href="classCentralStorage.html#a8382babfd80ae718d4f15ddfa5ef5017" title="key is the nbr of the queryImg (ImgCtr) --&gt; access kFrame: storage-&gt;kFrames[ matchedKeyFramesMap[nbr]...">matchedKeyFramesMap</a>.clear();

        this-&gt;<a class="code" href="classCentralStorage.html#a3ae59bfa3849b3dd984c636e0a9af23a">iGMap</a>.clear();
}
</pre></div>
</div>
</div>
<a class="anchor" id="a925c5d072478a869cc511e11cbe9248d"></a><!-- doxytag: member="CentralStorage::computeTrainBOWDescriptors" ref="a925c5d072478a869cc511e11cbe9248d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classCentralStorage.html#a925c5d072478a869cc511e11cbe9248d">CentralStorage::computeTrainBOWDescriptors</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CentralStorage_8cpp_source.html#l00067">67</a> of file <a class="el" href="CentralStorage_8cpp_source.html">CentralStorage.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                {
        <span class="keywordtype">int</span> imgCtr = 0;
        cv::Mat BOWDescriptors;

        std::vector&lt;cv::Mat&gt;::iterator itImg;
        <span class="keywordflow">for</span>(itImg = this-&gt;<a class="code" href="classCentralStorage.html#a673208fa43bab02c4e53077ae45a38e7">trainImgs_allRobots</a>.begin(); itImg != this-&gt;<a class="code" href="classCentralStorage.html#a673208fa43bab02c4e53077ae45a38e7">trainImgs_allRobots</a>.end(); ++itImg) {
                this-&gt;<a class="code" href="classCentralStorage.html#ab1828f1368902fab93265328a6e53063">bide</a>-&gt;compute(*itImg, this-&gt;<a class="code" href="classCentralStorage.html#a6eba28072f558f36c2b3a08170f9db74">trainKPts_allRobots</a>[imgCtr], BOWDescriptors);
                this-&gt;<a class="code" href="classCentralStorage.html#ad22679ec76d8fc9c99226a1bfdd4c410">trainBOWDescriptors_allRobots</a>.push_back(BOWDescriptors);
                imgCtr = imgCtr + 1;
        }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a250829100ab52dc84a71997246870a69"></a><!-- doxytag: member="CentralStorage::estimateScale" ref="a250829100ab52dc84a71997246870a69" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classCentralStorage.html#a250829100ab52dc84a71997246870a69">CentralStorage::estimateScale</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CentralStorage_8cpp_source.html#l00265">265</a> of file <a class="el" href="CentralStorage_8cpp_source.html">CentralStorage.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                   {
        cout &lt;&lt; <span class="stringliteral">&quot;       estimate scale &quot;</span> &lt;&lt; endl;

        <span class="comment">// if query = robot 2</span>
        <span class="comment">// iGTrafo = pC1C2 = tC2C1</span>
        <span class="keywordtype">int</span> queryImgNbr = this-&gt;<a class="code" href="classCentralStorage.html#ac6ecd35e9f6a9d0145f87fb98c6fb923">testImgCtr</a>;
        <span class="keywordtype">int</span> testImgNbr = <a class="code" href="classCentralStorage.html#a8382babfd80ae718d4f15ddfa5ef5017" title="key is the nbr of the queryImg (ImgCtr) --&gt; access kFrame: storage-&gt;kFrames[ matchedKeyFramesMap[nbr]...">matchedKeyFramesMap</a>[queryImgNbr].second;
        Eigen::Matrix4f iGTrafo = this-&gt;<a class="code" href="classCentralStorage.html#a3ae59bfa3849b3dd984c636e0a9af23a">iGMap</a>[queryImgNbr].first;
        <a class="code" href="structkeyFrame.html">keyFrame</a> queryKF, testKF;


        queryKF = this-&gt;<a class="code" href="classCentralStorage.html#ab477c78726c58cba1b5b14255700ff64">kFrames</a>[queryImgNbr];
        testKF = this-&gt;<a class="code" href="classCentralStorage.html#ab477c78726c58cba1b5b14255700ff64">kFrames</a>[testImgNbr];
        <span class="keywordtype">int</span> queryRID = queryKF.<a class="code" href="structkeyFrame.html#a3d8de485d4a812bf9dd92298ab4e1664">rID</a>;
        <span class="keywordtype">int</span> testRID = testKF.<a class="code" href="structkeyFrame.html#a3d8de485d4a812bf9dd92298ab4e1664">rID</a>;

        <span class="comment">// Extract descriptors from imgs</span>
        Mat queryImgDescr, testImgDescr;
        this-&gt;<a class="code" href="classCentralStorage.html#a8c18048b9cf9171a16d6d9e2fa8f8754">extractor</a>-&gt;compute( queryKF.<a class="code" href="structkeyFrame.html#a59576f76e321ecb82062edc5c7bc08fe">img</a>, queryKF.<a class="code" href="structkeyFrame.html#a420102716b1d90f44af48de225f241ba">KPts</a>, queryImgDescr );
        this-&gt;<a class="code" href="classCentralStorage.html#a8c18048b9cf9171a16d6d9e2fa8f8754">extractor</a>-&gt;compute( testKF.<a class="code" href="structkeyFrame.html#a59576f76e321ecb82062edc5c7bc08fe">img</a>, testKF.<a class="code" href="structkeyFrame.html#a420102716b1d90f44af48de225f241ba">KPts</a>, testImgDescr );

        <span class="comment">// match descriptors</span>
        std::vector&lt; DMatch &gt; resultingMatches;
        this-&gt;<a class="code" href="classCentralStorage.html#a8ff5fb67a41c196b5677015e09ff33be">matcher</a>-&gt;match(queryImgDescr,testImgDescr,resultingMatches);

        vector&lt;Point2f&gt; matched2DPtsQuery, matched2DPtsTest;
        vector&lt;Eigen::Vector3f&gt; matched3DPtsQuery, matched3DPtsTest;
        <span class="comment">//vector&lt;float&gt; measurements;</span>
        Eigen::Vector3f matched3DPtQuery(0.0,0.0,0.0), matched3DPtTest(0.0,0.0,0.0);

        vector&lt;KeyPoint&gt; matchedQueryKPts, matchedTestKPts;
        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; resultingMatches.size(); ++i)       {
                matchedQueryKPts.push_back(queryKF.<a class="code" href="structkeyFrame.html#a420102716b1d90f44af48de225f241ba">KPts</a>[resultingMatches[i].queryIdx]);
                matchedTestKPts.push_back(testKF.<a class="code" href="structkeyFrame.html#a420102716b1d90f44af48de225f241ba">KPts</a>[resultingMatches[i].trainIdx]);
        }
<span class="comment">//      HelperFcts::displayImageKPts(&quot;queryImg&quot;, queryKF.img, matchedQueryKPts);</span>
<span class="comment">//      HelperFcts::displayImageKPts(&quot;testImg&quot;, testKF.img, matchedTestKPts);</span>
<span class="comment">//      HelperFcts::displayMatches(&quot;matches&quot;, queryKF.img, testKF.img, queryKF.KPts, testKF.KPts, resultingMatches);</span>
<span class="comment">//      waitKey(10000);</span>

        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; resultingMatches.size(); ++i)       {
                Point2f matched2DPtQuery = queryKF.<a class="code" href="structkeyFrame.html#a420102716b1d90f44af48de225f241ba">KPts</a>[resultingMatches[i].queryIdx].pt;
                Point2f matched2DPtTest = testKF.<a class="code" href="structkeyFrame.html#a420102716b1d90f44af48de225f241ba">KPts</a>[resultingMatches[i].trainIdx].pt;

                <a class="code" href="classHelperFcts.html#a78ecd5fc1beee4ac69e27e0a07258b50">HelperFcts::calc3DPt</a>(matched2DPtQuery, queryKF.<a class="code" href="structkeyFrame.html#a145d6d5ab1e2da4d59d34000152111cd">fx</a>, queryKF.<a class="code" href="structkeyFrame.html#a48af06b30b2f6f5a73e61afddb7ea0c4">fy</a>, queryKF.<a class="code" href="structkeyFrame.html#a237a54d29c13a64b8a3d4a597ab061c5">cx</a>, queryKF.<a class="code" href="structkeyFrame.html#ac9d3a851908cfd7587fb3e7859087e5d">cy</a>, queryKF.<a class="code" href="structkeyFrame.html#ac952ad626e928e521c6663e611820dac">idepth</a>, matched3DPtQuery);
                <span class="comment">//HelperFcts::transform3DPt(queryKF.camToRobot, matched3DPtQuery, matched3DPtQuery);</span>


                <a class="code" href="classHelperFcts.html#a78ecd5fc1beee4ac69e27e0a07258b50">HelperFcts::calc3DPt</a>(matched2DPtTest, testKF.<a class="code" href="structkeyFrame.html#a145d6d5ab1e2da4d59d34000152111cd">fx</a>, testKF.<a class="code" href="structkeyFrame.html#a48af06b30b2f6f5a73e61afddb7ea0c4">fy</a>, testKF.<a class="code" href="structkeyFrame.html#a237a54d29c13a64b8a3d4a597ab061c5">cx</a>, testKF.<a class="code" href="structkeyFrame.html#ac9d3a851908cfd7587fb3e7859087e5d">cy</a>, testKF.<a class="code" href="structkeyFrame.html#ac952ad626e928e521c6663e611820dac">idepth</a>, matched3DPtTest);
                <span class="comment">// iGTrafo = pC1C2 = tC2C1</span>
                <span class="comment">// iGTrafo = pC2C1 = tC1C2</span>
                Eigen::Matrix4f iGTrafoInv(Eigen::Matrix4f::Identity(4,4));
                <a class="code" href="classHelperFcts.html#a92f54d3196a89e988323e73ebe14e106">HelperFcts::invTrafo</a>(iGTrafo, iGTrafoInv);
                <a class="code" href="classHelperFcts.html#a63c33b2156813b25f1034b66985984bd">HelperFcts::transform3DPt</a>(iGTrafoInv, matched3DPtQuery, matched3DPtQuery);


                KalmanFilterScale::Vector u(0);
                KalmanFilterScale::Vector z(3);
                <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0 ; i&lt;3 ; ++i) {

                        <span class="keywordtype">float</span> measurement = matched3DPtTest(i)/matched3DPtQuery(i);
                        z(i+1) = measurement;
                }
                this-&gt;<a class="code" href="classCentralStorage.html#af952071a5b552f94e01d8667227bfa57">filter</a>.step(u,z);
        }
        cout &lt;&lt; <span class="stringliteral">&quot;scale estimate:        &quot;</span> &lt;&lt; this-&gt;<a class="code" href="classCentralStorage.html#af952071a5b552f94e01d8667227bfa57">filter</a>.getX()(1) &lt;&lt; endl &lt;&lt; <span class="stringliteral">&quot;cov:    &quot;</span> &lt;&lt; this-&gt;<a class="code" href="classCentralStorage.html#af952071a5b552f94e01d8667227bfa57">filter</a>.calculateP()(1,1) &lt;&lt; endl;
        this-&gt;<a class="code" href="classCentralStorage.html#a017fa3b55ed277d63df2a0937be0ead7">robotScales</a>[queryRID] = this-&gt;<a class="code" href="classCentralStorage.html#af952071a5b552f94e01d8667227bfa57">filter</a>.getX()(1);
}
</pre></div>
</div>
</div>
<a class="anchor" id="aac60399a1652a2e63e3efd01d4758a1e"></a><!-- doxytag: member="CentralStorage::findTrafo" ref="aac60399a1652a2e63e3efd01d4758a1e" args="(Eigen::Matrix4f iG, Eigen::Matrix4f &amp;finalTrafo)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char <a class="el" href="classCentralStorage.html#aac60399a1652a2e63e3efd01d4758a1e">CentralStorage::findTrafo</a> </td>
          <td>(</td>
          <td class="paramtype">Eigen::Matrix4f&#160;</td>
          <td class="paramname"><em>iG</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Eigen::Matrix4f &amp;&#160;</td>
          <td class="paramname"><em>finalTrafo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Member function calculating an the pose of one camera relative to the other camera of two matched images based icp with the initial Guess calculated in findTrafoInitialGuess The result of running, namely pTestQuery (p2nd1st), is stored in ???? </p>

<p>Definition at line <a class="el" href="CentralStorage_8cpp_source.html#l00245">245</a> of file <a class="el" href="CentralStorage_8cpp_source.html">CentralStorage.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                                           {

        <span class="keywordtype">int</span> queryImgCtrMatch = this-&gt;<a class="code" href="classCentralStorage.html#ac6ecd35e9f6a9d0145f87fb98c6fb923">testImgCtr</a>;
        <span class="keywordtype">int</span> testImgCtrMatch = this-&gt;<a class="code" href="classCentralStorage.html#a8382babfd80ae718d4f15ddfa5ef5017" title="key is the nbr of the queryImg (ImgCtr) --&gt; access kFrame: storage-&gt;kFrames[ matchedKeyFramesMap[nbr]...">matchedKeyFramesMap</a>[queryImgCtrMatch].second;

        pcl::PointCloud&lt;pcl::PointXYZ&gt;::Ptr ptClToPtrSource(<span class="keyword">new</span> pcl::PointCloud&lt;pcl::PointXYZ&gt;());
        pcl::PointCloud&lt;pcl::PointXYZ&gt;::Ptr ptClToPtrTarget(<span class="keyword">new</span> pcl::PointCloud&lt;pcl::PointXYZ&gt;());
        *ptClToPtrSource = this-&gt;<a class="code" href="classCentralStorage.html#a98df05b89e7956601eeff266fbef0754" title="the key for accessing a ptCls corresponds to the the kFrames identity number (ImgCtr), the std::pair contains the associated rID and the actual PtCl">ptCls</a>[queryImgCtrMatch].second;
        *ptClToPtrTarget = this-&gt;<a class="code" href="classCentralStorage.html#a98df05b89e7956601eeff266fbef0754" title="the key for accessing a ptCls corresponds to the the kFrames identity number (ImgCtr), the std::pair contains the associated rID and the actual PtCl">ptCls</a>[testImgCtrMatch].second;

         pcl::IterativeClosestPoint&lt;pcl::PointXYZ, pcl::PointXYZ&gt; icp;
         icp.setInputSource(ptClToPtrSource);
         icp.setInputTarget(ptClToPtrTarget);

         pcl::PointCloud&lt;pcl::PointXYZ&gt; Final;
         icp.align(Final, iG);

         finalTrafo = icp.getFinalTransformation();
}
</pre></div>
</div>
</div>
<a class="anchor" id="a76c399f09dc7d0083508c1a14f8dd8f3"></a><!-- doxytag: member="CentralStorage::findTrafoInitialGuess" ref="a76c399f09dc7d0083508c1a14f8dd8f3" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char <a class="el" href="classCentralStorage.html#a76c399f09dc7d0083508c1a14f8dd8f3">CentralStorage::findTrafoInitialGuess</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Member function calculating an initial guess for the pose of one camera relative to the other camera of two matched images based on matched keypoints The result of running, namely pTestQuery (p2nd1st), is stored in storage-&gt;iGMap[queryImgCtr]. </p>

<p>Definition at line <a class="el" href="CentralStorage_8cpp_source.html#l00156">156</a> of file <a class="el" href="CentralStorage_8cpp_source.html">CentralStorage.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                           {

        cout &lt;&lt; <span class="stringliteral">&quot;               find IG&quot;</span> &lt;&lt; endl;
        <span class="keywordtype">int</span> queryImgNbr = this-&gt;<a class="code" href="classCentralStorage.html#ac6ecd35e9f6a9d0145f87fb98c6fb923">testImgCtr</a>;
        <span class="keywordtype">int</span> testImgNbr = <a class="code" href="classCentralStorage.html#a8382babfd80ae718d4f15ddfa5ef5017" title="key is the nbr of the queryImg (ImgCtr) --&gt; access kFrame: storage-&gt;kFrames[ matchedKeyFramesMap[nbr]...">matchedKeyFramesMap</a>[queryImgNbr].second;

        <a class="code" href="structkeyFrame.html">keyFrame</a> queryKF, testKF;

        queryKF = this-&gt;<a class="code" href="classCentralStorage.html#ab477c78726c58cba1b5b14255700ff64">kFrames</a>[queryImgNbr];
        testKF = this-&gt;<a class="code" href="classCentralStorage.html#ab477c78726c58cba1b5b14255700ff64">kFrames</a>[testImgNbr];
        <span class="keywordtype">int</span> queryRID = queryKF.<a class="code" href="structkeyFrame.html#a3d8de485d4a812bf9dd92298ab4e1664">rID</a>;
        <span class="keywordtype">int</span> testRID = testKF.<a class="code" href="structkeyFrame.html#a3d8de485d4a812bf9dd92298ab4e1664">rID</a>;
        <span class="comment">// Extract descriptors from imgs</span>
        Mat queryImgDescr, testImgDescr;
        this-&gt;<a class="code" href="classCentralStorage.html#a8c18048b9cf9171a16d6d9e2fa8f8754">extractor</a>-&gt;compute(queryKF.<a class="code" href="structkeyFrame.html#a59576f76e321ecb82062edc5c7bc08fe">img</a>,queryKF.<a class="code" href="structkeyFrame.html#a420102716b1d90f44af48de225f241ba">KPts</a>,queryImgDescr);
        this-&gt;<a class="code" href="classCentralStorage.html#a8c18048b9cf9171a16d6d9e2fa8f8754">extractor</a>-&gt;compute(testKF.<a class="code" href="structkeyFrame.html#a59576f76e321ecb82062edc5c7bc08fe">img</a>,testKF.<a class="code" href="structkeyFrame.html#a420102716b1d90f44af48de225f241ba">KPts</a>,testImgDescr);

        <span class="comment">// match descriptors</span>
        std::vector&lt; DMatch &gt; resultingMatches;
        this-&gt;<a class="code" href="classCentralStorage.html#a8ff5fb67a41c196b5677015e09ff33be">matcher</a>-&gt;match(queryImgDescr,testImgDescr,resultingMatches);

        <span class="comment">// Filter out bad matches</span>
        <span class="keywordtype">double</span> max_dist = 0; <span class="keywordtype">double</span> min_dist = 100;
        <span class="comment">//-- Quick calculation of max and min distances between keypoints</span>
        <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; queryImgDescr.rows; i++ ) {
                <span class="keywordtype">double</span> dist = resultingMatches[i].distance;
                <span class="keywordflow">if</span>( dist &lt; min_dist ) min_dist = dist;
                <span class="keywordflow">if</span>( dist &gt; max_dist ) max_dist = dist;
        }
        std::vector&lt; DMatch &gt; good_matches;
        <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; queryImgDescr.rows; i++ ) {
                <span class="keywordflow">if</span>( resultingMatches[i].distance &lt;= max(3*min_dist, 10.0) ) {
                        good_matches.push_back( resultingMatches[i]);
                }
        }


        <a class="code" href="classHelperFcts.html#a604ec2c5d85568f3b51a08c268e9578c">HelperFcts::displayMatches</a>(<span class="stringliteral">&quot;testmatches&quot;</span>,queryKF.<a class="code" href="structkeyFrame.html#a59576f76e321ecb82062edc5c7bc08fe">img</a>,testKF.<a class="code" href="structkeyFrame.html#a59576f76e321ecb82062edc5c7bc08fe">img</a>,queryKF.<a class="code" href="structkeyFrame.html#a420102716b1d90f44af48de225f241ba">KPts</a>,testKF.<a class="code" href="structkeyFrame.html#a420102716b1d90f44af48de225f241ba">KPts</a>,good_matches, <span class="keyword">true</span>);

        <span class="comment">//derive correspondences based on random point-cloud</span>
        bearingVector_t bearingVectorQuery,bearingVectorTest;
        bearingVectors_t bearingVectorsQuery;
        bearingVectors_t bearingVectorsTest;

        vector&lt;Point2f&gt; matchedPtsQuery, matchedPtsTest;
        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; good_matches.size(); ++i)
        {
                Point2f matchedPtQuery = queryKF.<a class="code" href="structkeyFrame.html#a420102716b1d90f44af48de225f241ba">KPts</a>[good_matches[i].queryIdx].pt;
                Point2f matchedPtTest = testKF.<a class="code" href="structkeyFrame.html#a420102716b1d90f44af48de225f241ba">KPts</a>[good_matches[i].trainIdx].pt;

                matchedPtsQuery.push_back(matchedPtQuery);
                matchedPtsTest.push_back(matchedPtTest);

                bearingVectorQuery[0] = matchedPtQuery.x/sqrt(matchedPtQuery.x*matchedPtQuery.x + matchedPtQuery.y*matchedPtQuery.y + 1.0);
                bearingVectorQuery[1] = matchedPtQuery.y/sqrt(matchedPtQuery.x*matchedPtQuery.x + matchedPtQuery.y*matchedPtQuery.y + 1.0);
                bearingVectorQuery[2] = 1.0;<span class="comment">//sqrt(1.0 - matchedPtQuery.x*matchedPtQuery.x - matchedPtQuery.y*matchedPtQuery.y);</span>
                bearingVectorQuery.normalize();

                bearingVectorTest[0] = matchedPtTest.x/sqrt(matchedPtTest.x*matchedPtTest.x + matchedPtTest.y*matchedPtTest.y + 1.0);
                bearingVectorTest[1] = matchedPtTest.y/sqrt(matchedPtTest.x*matchedPtTest.x + matchedPtTest.y*matchedPtTest.y + 1.0);
                <span class="comment">//sqrt(1.0 - matchedPtTest.x*matchedPtTest.x - matchedPtTest.y*matchedPtTest.y)</span>
                bearingVectorTest[2] = 1.0;<span class="comment">//sqrt(1.0 - matchedPtTest.x*matchedPtTest.x - matchedPtTest.y*matchedPtTest.y);</span>
                bearingVectorTest.normalize();

                bearingVectorsQuery.push_back(bearingVectorQuery);
                bearingVectorsTest.push_back(bearingVectorTest);

        }

        relative_pose::CentralRelativeAdapter adapter(bearingVectorsQuery,bearingVectorsTest);
        sac::Ransac&lt;sac_problems::relative_pose::CentralRelativePoseSacProblem&gt; ransac;
        boost::shared_ptr&lt;sac_problems::relative_pose::CentralRelativePoseSacProblem&gt; relposeproblem_ptr(<span class="keyword">new</span> sac_problems::relative_pose::CentralRelativePoseSacProblem(adapter,sac_problems::relative_pose::CentralRelativePoseSacProblem::NISTER));
        ransac.sac_model_ = relposeproblem_ptr;
        ransac.threshold_ = 2.0*(1.0 - cos(atan(sqrt(2.0)*0.5/800.0)));
        ransac.max_iterations_ = 50;

        ransac.computeModel();
        transformation_t pCamTestCamQueryOpenGV = ransac.model_coefficients_;


        Eigen::Matrix4f iG(Eigen::Matrix4f::Identity(4,4));
        Eigen::Matrix4d iGdouble(Eigen::Matrix4d::Identity(4,4));
        iGdouble.block(0,0,3,4) = pCamTestCamQueryOpenGV;
        iG = iGdouble.cast&lt;<span class="keywordtype">float</span>&gt;();

        this-&gt;<a class="code" href="classCentralStorage.html#a3ae59bfa3849b3dd984c636e0a9af23a">iGMap</a>[queryImgNbr] = std::make_pair(iG,testImgNbr);

}
</pre></div>
</div>
</div>
<a class="anchor" id="a76ea5d6aa74f139a4db824b679958ce2"></a><!-- doxytag: member="CentralStorage::generateCLTree" ref="a76ea5d6aa74f139a4db824b679958ce2" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char <a class="el" href="classCentralStorage.html#a76ea5d6aa74f139a4db824b679958ce2">CentralStorage::generateCLTree</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Member function generating chow liu tree and outputting it in "cltree.yml". </p>

<p>Definition at line <a class="el" href="CentralStorage_8cpp_source.html#l00079">79</a> of file <a class="el" href="CentralStorage_8cpp_source.html">CentralStorage.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                    {
        of2::ChowLiuTree treeBuilder;
        treeBuilder.add(this-&gt;<a class="code" href="classCentralStorage.html#ad22679ec76d8fc9c99226a1bfdd4c410">trainBOWDescriptors_allRobots</a>);
        this-&gt;<a class="code" href="classCentralStorage.html#a5d9e98c4102f50187f6a034a99ef9793">clTree</a> = treeBuilder.make();
}
</pre></div>
</div>
</div>
<a class="anchor" id="aed7b4357ce0cb743a5c8074b805b51a5"></a><!-- doxytag: member="CentralStorage::generateVocabulary" ref="aed7b4357ce0cb743a5c8074b805b51a5" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char <a class="el" href="classCentralStorage.html#aed7b4357ce0cb743a5c8074b805b51a5">CentralStorage::generateVocabulary</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Member function generating vocabulatory (dictionary/ visual words/ ...) and outputting it in "vocab.yml", also saves all descriptors (SURF) of all robots in "trainDescriptors_allRobots.yml". </p>

<p>Definition at line <a class="el" href="CentralStorage_8cpp_source.html#l00062">62</a> of file <a class="el" href="CentralStorage_8cpp_source.html">CentralStorage.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                        {
        this-&gt;<a class="code" href="classCentralStorage.html#aa30a8d753544480abd495023cbf62a2f">BOWTrainer</a>-&gt;add(this-&gt;<a class="code" href="classCentralStorage.html#ad574732df5058d95d650c1187a9ba4f6">trainDescriptors_allRobots</a>);
        this-&gt;<a class="code" href="classCentralStorage.html#a50f04d43d8c1f26725bb2e2e560a494c">vocabulary</a> = this-&gt;<a class="code" href="classCentralStorage.html#aa30a8d753544480abd495023cbf62a2f">BOWTrainer</a>-&gt;cluster(); <span class="comment">// Returns the cluster centers (descriptors are clustered into nbr vis words)</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="a7e6a32a86c37de7871884670cf97d598"></a><!-- doxytag: member="CentralStorage::searchForGoodMatch" ref="a7e6a32a86c37de7871884670cf97d598" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classCentralStorage.html#a7e6a32a86c37de7871884670cf97d598">CentralStorage::searchForGoodMatch</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CentralStorage_8cpp_source.html#l00085">85</a> of file <a class="el" href="CentralStorage_8cpp_source.html">CentralStorage.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                        {
        <span class="comment">//FOR TMR</span>
        <span class="comment">// dont consider first several imsg</span>
        <span class="comment">// add consecutive if from other robot</span>
        <span class="comment">// no match if other robot has some there</span>
        <span class="keywordflow">if</span>(this-&gt;<a class="code" href="classCentralStorage.html#ac6ecd35e9f6a9d0145f87fb98c6fb923">testImgCtr</a>&gt;0) {

                ostringstream convStringFileName, convStringContent;
                <span class="keywordtype">string</span> matchedImgsFileName, matchedImgsContent;
                <span class="keywordtype">int</span> kFrameNbr = -10000;
                <span class="keywordtype">int</span> rID = this-&gt;<a class="code" href="classCentralStorage.html#ab477c78726c58cba1b5b14255700ff64">kFrames</a>[this-&gt;<a class="code" href="classCentralStorage.html#ac6ecd35e9f6a9d0145f87fb98c6fb923">testImgCtr</a>].rID;
                vector&lt;of2::IMatch&gt;::const_iterator it;
                <span class="keywordtype">float</span> maxLikeli = 0;
                <span class="keywordtype">float</span> matchCurrent(0.0), matchLast(0.0), matchSecondLast(0.0);
                <span class="comment">//int nbrImgs = (int) -0.5+(1/4+2*this-&gt;matches.size())^(1/2);</span>
                <span class="comment">// for last query Img (last keyframe) loop through all (test)imgs except the query img on its own (query img - query img : this-&gt;matches.end()-this-&gt;testImgCtr-1)</span>
                <span class="keywordflow">for</span>(it = this-&gt;<a class="code" href="classCentralStorage.html#af2ce7451320774bb90db744fa46493bd">matches</a>.end()-this-&gt;<a class="code" href="classCentralStorage.html#ac6ecd35e9f6a9d0145f87fb98c6fb923">testImgCtr</a>; it != this-&gt;<a class="code" href="classCentralStorage.html#af2ce7451320774bb90db744fa46493bd">matches</a>.end(); ++it) {

<span class="comment">//                      if(this-&gt;testImgCtr &lt; 30) { // dont consider matches among the first 6 keyframes</span>
<span class="comment">//                      if(this-&gt;testImgCtr &lt; 8) { // dont consider matches among the first 6 keyframes</span>
                        <span class="keywordflow">if</span>(this-&gt;<a class="code" href="classCentralStorage.html#ac6ecd35e9f6a9d0145f87fb98c6fb923">testImgCtr</a> &lt; 45) { <span class="comment">// dont consider matches among the first 6 keyframes</span>
                                <span class="keywordflow">continue</span>;
                        }


<span class="comment">//                      if(it-&gt;match &lt; 0.75) {</span>
                        <span class="keywordflow">if</span>(it-&gt;match &lt; 0.75) {
<span class="comment">//                              cout &lt;&lt; &quot;               match probability too low&quot; &lt;&lt; endl;</span>
                                <span class="keywordflow">continue</span>;
                        }

                        <span class="keywordflow">if</span>(it-&gt;imgIdx != -1) { <span class="comment">// comparing query Img to testing Img associated with kFrameNbr</span>
                                kFrameNbr = it-&gt;imgIdx;
                        }
                        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(it-&gt;imgIdx == -1) { <span class="comment">// comparing query Img to itself</span>
<span class="comment">//                              cout &lt;&lt; &quot;               compared to its own2&quot; &lt;&lt; endl;</span>
                                kFrameNbr = this-&gt;<a class="code" href="classCentralStorage.html#ab477c78726c58cba1b5b14255700ff64">kFrames</a>.size()-1;
                                <span class="keywordflow">continue</span>; <span class="comment">// Do not test to itself</span>
                        }

                        <span class="keywordflow">if</span>(this-&gt;<a class="code" href="classCentralStorage.html#ab477c78726c58cba1b5b14255700ff64">kFrames</a>[this-&gt;<a class="code" href="classCentralStorage.html#ac6ecd35e9f6a9d0145f87fb98c6fb923">testImgCtr</a>].rID == this-&gt;<a class="code" href="classCentralStorage.html#ab477c78726c58cba1b5b14255700ff64">kFrames</a>[kFrameNbr].rID) { <span class="comment">// No matches of same robot</span>
<span class="comment">//                              cout &lt;&lt; &quot;               same robot ID&quot; &lt;&lt; endl;</span>
                                <span class="keywordflow">continue</span>;
                        }

                        <span class="comment">// name of file determines queryImg specifications</span>
                        convStringFileName &lt;&lt; <span class="stringliteral">&quot;matchingImgs/robot&quot;</span> &lt;&lt; this-&gt;<a class="code" href="classCentralStorage.html#ab477c78726c58cba1b5b14255700ff64">kFrames</a>[this-&gt;<a class="code" href="classCentralStorage.html#ac6ecd35e9f6a9d0145f87fb98c6fb923">testImgCtr</a>].rID &lt;&lt; <span class="stringliteral">&quot;MatchedImgsQueryImg&quot;</span> &lt;&lt; this-&gt;<a class="code" href="classCentralStorage.html#ab477c78726c58cba1b5b14255700ff64">kFrames</a>[this-&gt;<a class="code" href="classCentralStorage.html#ac6ecd35e9f6a9d0145f87fb98c6fb923">testImgCtr</a>].fID &lt;&lt; <span class="stringliteral">&quot;.yml&quot;</span>;
                        matchedImgsFileName = convStringFileName.str();

                        convStringContent &lt;&lt; <span class="stringliteral">&quot;robot: &quot;</span> &lt;&lt; this-&gt;<a class="code" href="classCentralStorage.html#ab477c78726c58cba1b5b14255700ff64">kFrames</a>[kFrameNbr].rID &lt;&lt; <span class="stringliteral">&quot;   MatchedImg: &quot;</span> &lt;&lt; this-&gt;<a class="code" href="classCentralStorage.html#ab477c78726c58cba1b5b14255700ff64">kFrames</a>[kFrameNbr].fID &lt;&lt; <span class="stringliteral">&quot;   MatchProbab: &quot;</span> &lt;&lt; it-&gt;match &lt;&lt; <span class="stringliteral">&quot;     &quot;</span>;
                        matchedImgsContent = convStringContent.str();

                        this-&gt;<a class="code" href="classCentralStorage.html#a393e5d052d921122176d0ebf0a6cfadb">matchedKeyFrames</a>.first = this-&gt;<a class="code" href="classCentralStorage.html#ac6ecd35e9f6a9d0145f87fb98c6fb923">testImgCtr</a>; <span class="comment">// query Img</span>
                        this-&gt;<a class="code" href="classCentralStorage.html#a393e5d052d921122176d0ebf0a6cfadb">matchedKeyFrames</a>.second = kFrameNbr; <span class="comment">// matched test Img</span>
                        this-&gt;<a class="code" href="classCentralStorage.html#a8382babfd80ae718d4f15ddfa5ef5017" title="key is the nbr of the queryImg (ImgCtr) --&gt; access kFrame: storage-&gt;kFrames[ matchedKeyFramesMap[nbr]...">matchedKeyFramesMap</a>.insert(std::pair&lt;<span class="keywordtype">int</span>,std::pair &lt;int,int&gt; &gt;(this-&gt;<a class="code" href="classCentralStorage.html#ac6ecd35e9f6a9d0145f87fb98c6fb923">testImgCtr</a>,this-&gt;<a class="code" href="classCentralStorage.html#a393e5d052d921122176d0ebf0a6cfadb">matchedKeyFrames</a>)); <span class="comment">// store with key &quot;nbr of query image (= this-&gt;testImgCtr)&quot;</span>
                        <span class="keywordflow">if</span>(!matchedImgsContent.empty()) {
                                cout &lt;&lt; <span class="stringliteral">&quot;               GOOD MATCH&quot;</span> &lt;&lt; endl;
                                <a class="code" href="classHelperFcts.html#a496060ba1f925b932814bdaafde769d5">HelperFcts::saveStringToFile</a>(matchedImgsContent, matchedImgsFileName);
                                this-&gt;<a class="code" href="classCentralStorage.html#a311e52441ce3ca79a2eac623c58221cc">boolMatch</a> = <span class="keyword">true</span>;

                                <span class="comment">// set bool to update map</span>
                                <span class="keyword">typedef</span> std::map&lt;int,bool&gt; ptClUpdatedMap;
                                <span class="keywordflow">for</span> (ptClUpdatedMap::iterator it = this-&gt;<a class="code" href="classCentralStorage.html#a6b25259119c01d07da15d4e5c9f806f8">ptClsInGlobalWorldCOSUpdated</a>.begin(); it!=this-&gt;<a class="code" href="classCentralStorage.html#a6b25259119c01d07da15d4e5c9f806f8">ptClsInGlobalWorldCOSUpdated</a>.end(); ++it) {
                                        it-&gt;second = <span class="keyword">false</span>;
                                }
                        }
                } <span class="comment">// END for loop through matches</span>

        } <span class="comment">// END if this-&gt;testImgCtr &gt; 0</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad0e2f8a4581fe0e61a49b07141442dd2"></a><!-- doxytag: member="CentralStorage::updatePosesOfRobots" ref="ad0e2f8a4581fe0e61a49b07141442dd2" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classCentralStorage.html#ad0e2f8a4581fe0e61a49b07141442dd2">CentralStorage::updatePosesOfRobots</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CentralStorage_8cpp_source.html#l00334">334</a> of file <a class="el" href="CentralStorage_8cpp_source.html">CentralStorage.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                         {
        cout &lt;&lt; <span class="stringliteral">&quot;       Update Poses of Robots&quot;</span> &lt;&lt; endl;

        <span class="comment">// check if any ptcl has update neccessary</span>
        <span class="keyword">typedef</span> std::map&lt;int,bool&gt; ptClUpdatedMap;
        vector&lt;int&gt; rIDToUpdate;
        <span class="keywordflow">for</span> (ptClUpdatedMap::iterator it = this-&gt;<a class="code" href="classCentralStorage.html#a6b25259119c01d07da15d4e5c9f806f8">ptClsInGlobalWorldCOSUpdated</a>.begin(); it!=this-&gt;<a class="code" href="classCentralStorage.html#a6b25259119c01d07da15d4e5c9f806f8">ptClsInGlobalWorldCOSUpdated</a>.end(); ++it) {
                <span class="keywordflow">if</span>(it-&gt;second == <span class="keyword">false</span>) {
                        rIDToUpdate.push_back(it-&gt;first);
                }
        }

        <span class="keywordflow">if</span>(this-&gt;<a class="code" href="classCentralStorage.html#a8382babfd80ae718d4f15ddfa5ef5017" title="key is the nbr of the queryImg (ImgCtr) --&gt; access kFrame: storage-&gt;kFrames[ matchedKeyFramesMap[nbr]...">matchedKeyFramesMap</a>.empty()) { <span class="comment">// no matches yet</span>
                cout &lt;&lt; <span class="stringliteral">&quot;               No matches yet&quot;</span> &lt;&lt; endl;
                this-&gt;<a class="code" href="classCentralStorage.html#ae701316885fe7f1366f17ec44393b84b">pRobotsWorld</a>[1] = Eigen::Matrix4f::Identity(4,4);

                Eigen::Matrix4f initTrafo(Eigen::Matrix4f::Identity(4,4));
                initTrafo.block(0,3,3,1) &lt;&lt; 0,0,0;
                this-&gt;<a class="code" href="classCentralStorage.html#ae701316885fe7f1366f17ec44393b84b">pRobotsWorld</a>[2] = initTrafo;
        }
        <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !this-&gt;<a class="code" href="classCentralStorage.html#a8382babfd80ae718d4f15ddfa5ef5017" title="key is the nbr of the queryImg (ImgCtr) --&gt; access kFrame: storage-&gt;kFrames[ matchedKeyFramesMap[nbr]...">matchedKeyFramesMap</a>.empty() &amp;&amp; !rIDToUpdate.empty() ) { <span class="comment">// there is a new match</span>
                <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=1; i&lt;=this-&gt;<a class="code" href="classCentralStorage.html#a83a67f52de30d339d872138243d42764">nbrRobots</a>; ++i) { <span class="comment">// iterate through all robots</span>
                        <span class="keywordflow">if</span>(i == 1) { <span class="comment">// update global pose of robot 1</span>
                                this-&gt;<a class="code" href="classCentralStorage.html#ae701316885fe7f1366f17ec44393b84b">pRobotsWorld</a>[i] = Eigen::Matrix4f::Identity(4,4);
                                this-&gt;<a class="code" href="classCentralStorage.html#a6b25259119c01d07da15d4e5c9f806f8">ptClsInGlobalWorldCOSUpdated</a>[i] = <span class="keyword">false</span>;
                        }
                        <span class="keywordflow">else</span> { <span class="comment">// update global pose of robot 2</span>
                                <span class="comment">// pRobotsWorld[2] = pRobot2World = tWorldRobot2</span>
                                <span class="comment">// = tWorldRobot1 * tRobot1Cam1 * tCam1Cam2 * tCam2Robot2</span>
                                <span class="comment">// = Identity     * pCam1Robot1 * pCam2Cam1 * pRobot2Cam2</span>
                                <span class="comment">// = Identity     * pCam1Robot1 * pCam2Cam1 * pCam2Robot2^(-1)</span>

                                <span class="keywordtype">int</span> matchQueryImgCtr = this-&gt;<a class="code" href="classCentralStorage.html#a8382babfd80ae718d4f15ddfa5ef5017" title="key is the nbr of the queryImg (ImgCtr) --&gt; access kFrame: storage-&gt;kFrames[ matchedKeyFramesMap[nbr]...">matchedKeyFramesMap</a>.rbegin()-&gt;second.first;
                                <span class="keywordtype">int</span> matchTestImgCtr = this-&gt;<a class="code" href="classCentralStorage.html#a8382babfd80ae718d4f15ddfa5ef5017" title="key is the nbr of the queryImg (ImgCtr) --&gt; access kFrame: storage-&gt;kFrames[ matchedKeyFramesMap[nbr]...">matchedKeyFramesMap</a>.rbegin()-&gt;second.second;

                                <span class="keywordflow">if</span>(this-&gt;<a class="code" href="classCentralStorage.html#a9f86101c4abfa538b14ecafbbffb49e8">localPoses</a>[matchQueryImgCtr].first == 1) {
                                        <span class="comment">// R1 = Query, R2 = Test</span>
                                        Eigen::Matrix4f pCam1Robot1(Eigen::Matrix4f::Identity(4,4));
                                        <a class="code" href="classHelperFcts.html#ad8c1a028f297ea395c9d8239f64a74e2">HelperFcts::poseStampedROSToMatrix4f</a>(this-&gt;<a class="code" href="classCentralStorage.html#a9f86101c4abfa538b14ecafbbffb49e8">localPoses</a>[matchQueryImgCtr].second, pCam1Robot1);

                                        Eigen::Matrix4f pCam2Cam1(Eigen::Matrix4f::Identity(4,4));
                                        pCam2Cam1 = this-&gt;<a class="code" href="classCentralStorage.html#a3ae59bfa3849b3dd984c636e0a9af23a">iGMap</a>[matchQueryImgCtr].first;

                                        Eigen::Matrix4f pRobot2Cam2(Eigen::Matrix4f::Identity(4,4));
                                        Eigen::Matrix4f pCam2Robot2(Eigen::Matrix4f::Identity(4,4));
                                        <a class="code" href="classHelperFcts.html#ad8c1a028f297ea395c9d8239f64a74e2">HelperFcts::poseStampedROSToMatrix4f</a>(this-&gt;<a class="code" href="classCentralStorage.html#a9f86101c4abfa538b14ecafbbffb49e8">localPoses</a>[matchTestImgCtr].second, pCam2Robot2);
                                        <a class="code" href="classHelperFcts.html#a92f54d3196a89e988323e73ebe14e106">HelperFcts::invTrafo</a>(pCam2Robot2, pRobot2Cam2);
                                        <span class="comment">//this-&gt;pRobotsWorld[rID] = Eigen::Matrix4f::Identity(4,4) * pCam1Robot1 * pCam2Cam1 * pRobot2Cam2;</span>

                                        Eigen::Matrix4f scale(Eigen::Matrix4f::Identity(4,4));
                                        scale.block(0,0,3,3) = 1/this-&gt;<a class="code" href="classCentralStorage.html#a017fa3b55ed277d63df2a0937be0ead7">robotScales</a>[i]*Eigen::Matrix3f::Identity(3,3);

                                        Eigen::Matrix4f invTmp;
                                        <a class="code" href="classHelperFcts.html#a92f54d3196a89e988323e73ebe14e106">HelperFcts::invTrafo</a>(Eigen::Matrix4f::Identity(4,4) * pCam1Robot1 * pRobot2Cam2 * scale, invTmp);

                                        this-&gt;<a class="code" href="classCentralStorage.html#ae701316885fe7f1366f17ec44393b84b">pRobotsWorld</a>[i] = Eigen::Matrix4f::Identity(4,4) * pCam1Robot1 * pRobot2Cam2 * scale;
                                        <span class="comment">//this-&gt;pRobotsWorld[i] = Eigen::Matrix4f::Identity(4,4) * pCam1Robot1 * pRobot2Cam2 * 1;</span>
                                        cout &lt;&lt; <span class="stringliteral">&quot;this-&gt;pRobotsWorld[i]: &quot;</span> &lt;&lt; this-&gt;<a class="code" href="classCentralStorage.html#ae701316885fe7f1366f17ec44393b84b">pRobotsWorld</a>[i] &lt;&lt; endl;
                                }
                                <span class="keywordflow">else</span> <span class="keywordflow">if</span>(this-&gt;<a class="code" href="classCentralStorage.html#a9f86101c4abfa538b14ecafbbffb49e8">localPoses</a>[matchQueryImgCtr].first == 2) {
                                        <span class="comment">// R2 = Query, R1 = Test</span>
                                        Eigen::Matrix4f pCam1Robot1(Eigen::Matrix4f::Identity(4,4));
                                        <a class="code" href="classHelperFcts.html#ad8c1a028f297ea395c9d8239f64a74e2">HelperFcts::poseStampedROSToMatrix4f</a>(this-&gt;<a class="code" href="classCentralStorage.html#a9f86101c4abfa538b14ecafbbffb49e8">localPoses</a>[matchTestImgCtr].second, pCam1Robot1);

                                        Eigen::Matrix4f pCam2Cam1(Eigen::Matrix4f::Identity(4,4));
                                        Eigen::Matrix4f pCam1Cam2(Eigen::Matrix4f::Identity(4,4));
                                        pCam1Cam2 = this-&gt;<a class="code" href="classCentralStorage.html#a3ae59bfa3849b3dd984c636e0a9af23a">iGMap</a>[matchQueryImgCtr].first;
                                        <a class="code" href="classHelperFcts.html#a92f54d3196a89e988323e73ebe14e106">HelperFcts::invTrafo</a>(pCam1Cam2, pCam2Cam1);

                                        Eigen::Matrix4f pRobot2Cam2(Eigen::Matrix4f::Identity(4,4));
                                        Eigen::Matrix4f pCam2Robot2(Eigen::Matrix4f::Identity(4,4));
                                        <a class="code" href="classHelperFcts.html#ad8c1a028f297ea395c9d8239f64a74e2">HelperFcts::poseStampedROSToMatrix4f</a>(this-&gt;<a class="code" href="classCentralStorage.html#a9f86101c4abfa538b14ecafbbffb49e8">localPoses</a>[matchQueryImgCtr].second, pCam2Robot2);
                                        <a class="code" href="classHelperFcts.html#a92f54d3196a89e988323e73ebe14e106">HelperFcts::invTrafo</a>(pCam2Robot2, pRobot2Cam2);
                                        <span class="comment">//this-&gt;pRobotsWorld[rID] = Eigen::Matrix4f::Identity(4,4) * pCam1Robot1 * pCam2Cam1 * pRobot2Cam2;</span>

                                        Eigen::Matrix4f scale(Eigen::Matrix4f::Identity(4,4));
                                        scale.block(0,0,3,3) = 1/this-&gt;<a class="code" href="classCentralStorage.html#a017fa3b55ed277d63df2a0937be0ead7">robotScales</a>[i]*Eigen::Matrix3f::Identity(3,3);

                                        Eigen::Matrix4f invTmp;
                                        <a class="code" href="classHelperFcts.html#a92f54d3196a89e988323e73ebe14e106">HelperFcts::invTrafo</a>(Eigen::Matrix4f::Identity(4,4) * pCam1Robot1 * pRobot2Cam2 * scale, invTmp);

                                        this-&gt;<a class="code" href="classCentralStorage.html#ae701316885fe7f1366f17ec44393b84b">pRobotsWorld</a>[i] = Eigen::Matrix4f::Identity(4,4) * pCam1Robot1 * pRobot2Cam2 * scale;
                                        <span class="comment">//this-&gt;pRobotsWorld[i] = Eigen::Matrix4f::Identity(4,4) * pCam1Robot1 * pRobot2Cam2 * 1;</span>
                                        cout &lt;&lt; <span class="stringliteral">&quot;this-&gt;pRobotsWorld[i]: &quot;</span> &lt;&lt; this-&gt;<a class="code" href="classCentralStorage.html#ae701316885fe7f1366f17ec44393b84b">pRobotsWorld</a>[i] &lt;&lt; endl;

                                }
                                this-&gt;<a class="code" href="classCentralStorage.html#a6b25259119c01d07da15d4e5c9f806f8">ptClsInGlobalWorldCOSUpdated</a>[i] = <span class="keyword">false</span>;
                        }
                }
        }
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac065c164a68a24bb1d5e0ff0b9a41f84"></a><!-- doxytag: member="CentralStorage::updatePtCls" ref="ac065c164a68a24bb1d5e0ff0b9a41f84" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classCentralStorage.html#ac065c164a68a24bb1d5e0ff0b9a41f84">CentralStorage::updatePtCls</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CentralStorage_8cpp_source.html#l00426">426</a> of file <a class="el" href="CentralStorage_8cpp_source.html">CentralStorage.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                 {
        cout &lt;&lt; <span class="stringliteral">&quot;       Update PtCls&quot;</span> &lt;&lt; endl;

        <span class="comment">/* Naming conventions:</span>
<span class="comment">         * p: pose</span>
<span class="comment">         * t: coordinate transformation</span>
<span class="comment">         * pCOS2COS1:  pose of COS2 relative to COS1 (expressed in COS1)</span>
<span class="comment">         * tCOS2COS1:  coordinate transformation from COS1 to COS2 (transforms representation of 3D coords in COS1 to representation of same 3D points in COS2)</span>
<span class="comment">         * Robot: initial Robot coordinate system (initial pose of robot at initialization of SLAM robot)</span>
<span class="comment">         * Cam: camera coordinate system of corresponding robot (current pose of camera and robot - transformation between current robot COS and camera COS is assumed to be identity)</span>
<span class="comment">         * World: world coordinate system, equivalent to initial robot coordinate system of robot with robot ID rID=1</span>
<span class="comment">         */</span>
        Eigen::Matrix4f pRobotWorld(Eigen::Matrix4f::Identity(4,4));
        Eigen::Matrix4f pWorldRobot(Eigen::Matrix4f::Identity(4,4));
        Eigen::Matrix4f tWorldRobot(Eigen::Matrix4f::Identity(4,4));

        <span class="keyword">typedef</span> std::map&lt;int,bool&gt; ptClUpdatedMap;
        <span class="keyword">typedef</span> std::vector&lt;int&gt; rIDToUpdateVec;
        <span class="keyword">typedef</span> std::map&lt;int,std::pair &lt;int,pcl::PointCloud&lt;pcl::PointXYZ&gt; &gt; &gt; ptClMap;

        <span class="comment">// check robot ID for which ptcls can be updated</span>
        vector&lt;int&gt; rIDToUpdate;
        <span class="keywordflow">for</span> (ptClUpdatedMap::iterator it = this-&gt;<a class="code" href="classCentralStorage.html#a6b25259119c01d07da15d4e5c9f806f8">ptClsInGlobalWorldCOSUpdated</a>.begin(); it!=this-&gt;<a class="code" href="classCentralStorage.html#a6b25259119c01d07da15d4e5c9f806f8">ptClsInGlobalWorldCOSUpdated</a>.end(); ++it) {
                <span class="keywordflow">if</span>(it-&gt;second == <span class="keyword">false</span>) {
                        cout &lt;&lt; <span class="stringliteral">&quot;               PtCls to update: &quot;</span> &lt;&lt; it-&gt;first &lt;&lt; endl;
                        rIDToUpdate.push_back(it-&gt;first);
                }
        }

        <span class="keywordflow">if</span>(rIDToUpdate.empty()) { <span class="comment">// all ptcls up-to-date</span>
                cout &lt;&lt; <span class="stringliteral">&quot;               All PtCls up-to-date&quot;</span> &lt;&lt; endl;
        }
        <span class="keywordflow">else</span> { <span class="comment">// update ptcls</span>
                <span class="comment">// update all ptcls from all robot IDs in rIDToUpdate</span>
                <span class="keywordflow">for</span>(rIDToUpdateVec::iterator itVec=rIDToUpdate.begin(); itVec&lt;rIDToUpdate.end(); ++itVec) {
                        <span class="comment">// iterate through all robots that need their ptCls to be updated</span>

                        <span class="keywordflow">for</span> (ptClMap::iterator it = this-&gt;<a class="code" href="classCentralStorage.html#a98df05b89e7956601eeff266fbef0754" title="the key for accessing a ptCls corresponds to the the kFrames identity number (ImgCtr), the std::pair contains the associated rID and the actual PtCl">ptCls</a>.begin(); it!=this-&gt;<a class="code" href="classCentralStorage.html#a98df05b89e7956601eeff266fbef0754" title="the key for accessing a ptCls corresponds to the the kFrames identity number (ImgCtr), the std::pair contains the associated rID and the actual PtCl">ptCls</a>.end(); ++it) {
                                <span class="comment">// iterate through all ptcls</span>
                                <span class="keywordflow">if</span>( (it-&gt;second.first == *itVec) ) {
                                        <span class="comment">// check if the corresponding robot needs update</span>
                                        this-&gt;<a class="code" href="classCentralStorage.html#ac162077a92cd58a58d19ae7404719490">ptClsInGlobalWorldCOS</a>[it-&gt;first].first = it-&gt;second.first;
                                        pRobotWorld = this-&gt;<a class="code" href="classCentralStorage.html#ae701316885fe7f1366f17ec44393b84b">pRobotsWorld</a>[*itVec];
                                        tWorldRobot = pRobotWorld;
                                        <a class="code" href="classHelperFcts.html#a92f54d3196a89e988323e73ebe14e106">HelperFcts::invTrafo</a>(pRobotWorld,pWorldRobot);
                                        pcl::transformPointCloud(it-&gt;second.second, this-&gt;ptClsInGlobalWorldCOS[it-&gt;first].second, pRobotWorld);
                                }
                        }
                        this-&gt;<a class="code" href="classCentralStorage.html#a6b25259119c01d07da15d4e5c9f806f8">ptClsInGlobalWorldCOSUpdated</a>[*itVec] = <span class="keyword">true</span>;
                }
        }
}
</pre></div>
</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="ab1828f1368902fab93265328a6e53063"></a><!-- doxytag: member="CentralStorage::bide" ref="ab1828f1368902fab93265328a6e53063" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BOWImgDescriptorExtractor* <a class="el" href="classCentralStorage.html#ab1828f1368902fab93265328a6e53063">CentralStorage::bide</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CentralStorage_8h_source.html#l00103">103</a> of file <a class="el" href="CentralStorage_8h_source.html">CentralStorage.h</a>.</p>

</div>
</div>
<a class="anchor" id="a311e52441ce3ca79a2eac623c58221cc"></a><!-- doxytag: member="CentralStorage::boolMatch" ref="a311e52441ce3ca79a2eac623c58221cc" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classCentralStorage.html#a311e52441ce3ca79a2eac623c58221cc">CentralStorage::boolMatch</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CentralStorage_8h_source.html#l00142">142</a> of file <a class="el" href="CentralStorage_8h_source.html">CentralStorage.h</a>.</p>

</div>
</div>
<a class="anchor" id="aa30a8d753544480abd495023cbf62a2f"></a><!-- doxytag: member="CentralStorage::BOWTrainer" ref="aa30a8d753544480abd495023cbf62a2f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BOWKMeansTrainer* <a class="el" href="classCentralStorage.html#aa30a8d753544480abd495023cbf62a2f">CentralStorage::BOWTrainer</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CentralStorage_8h_source.html#l00099">99</a> of file <a class="el" href="CentralStorage_8h_source.html">CentralStorage.h</a>.</p>

</div>
</div>
<a class="anchor" id="adfcd7e35336daa5d959f783c9180460f"></a><!-- doxytag: member="CentralStorage::camModel" ref="adfcd7e35336daa5d959f783c9180460f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">image_geometry::PinholeCameraModel <a class="el" href="classCentralStorage.html#adfcd7e35336daa5d959f783c9180460f">CentralStorage::camModel</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CentralStorage_8h_source.html#l00083">83</a> of file <a class="el" href="CentralStorage_8h_source.html">CentralStorage.h</a>.</p>

</div>
</div>
<a class="anchor" id="a5d9e98c4102f50187f6a034a99ef9793"></a><!-- doxytag: member="CentralStorage::clTree" ref="a5d9e98c4102f50187f6a034a99ef9793" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cv::Mat <a class="el" href="classCentralStorage.html#a5d9e98c4102f50187f6a034a99ef9793">CentralStorage::clTree</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CentralStorage_8h_source.html#l00094">94</a> of file <a class="el" href="CentralStorage_8h_source.html">CentralStorage.h</a>.</p>

</div>
</div>
<a class="anchor" id="a3853e38f8eadbe09da6a1855b29704f7"></a><!-- doxytag: member="CentralStorage::detector" ref="a3853e38f8eadbe09da6a1855b29704f7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Ptr&lt;FeatureDetector&gt; <a class="el" href="classCentralStorage.html#a3853e38f8eadbe09da6a1855b29704f7">CentralStorage::detector</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CentralStorage_8h_source.html#l00100">100</a> of file <a class="el" href="CentralStorage_8h_source.html">CentralStorage.h</a>.</p>

</div>
</div>
<a class="anchor" id="a8c18048b9cf9171a16d6d9e2fa8f8754"></a><!-- doxytag: member="CentralStorage::extractor" ref="a8c18048b9cf9171a16d6d9e2fa8f8754" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Ptr&lt;DescriptorExtractor&gt; <a class="el" href="classCentralStorage.html#a8c18048b9cf9171a16d6d9e2fa8f8754">CentralStorage::extractor</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CentralStorage_8h_source.html#l00101">101</a> of file <a class="el" href="CentralStorage_8h_source.html">CentralStorage.h</a>.</p>

</div>
</div>
<a class="anchor" id="a4172d4d2a8509cb0bfbdb4edc8a3707b"></a><!-- doxytag: member="CentralStorage::fabmap" ref="a4172d4d2a8509cb0bfbdb4edc8a3707b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Ptr&lt;of2::FabMap&gt; <a class="el" href="classCentralStorage.html#a4172d4d2a8509cb0bfbdb4edc8a3707b">CentralStorage::fabmap</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CentralStorage_8h_source.html#l00105">105</a> of file <a class="el" href="CentralStorage_8h_source.html">CentralStorage.h</a>.</p>

</div>
</div>
<a class="anchor" id="af952071a5b552f94e01d8667227bfa57"></a><!-- doxytag: member="CentralStorage::filter" ref="af952071a5b552f94e01d8667227bfa57" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classKalmanFilterScale.html">KalmanFilterScale</a> <a class="el" href="classCentralStorage.html#af952071a5b552f94e01d8667227bfa57">CentralStorage::filter</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CentralStorage_8h_source.html#l00122">122</a> of file <a class="el" href="CentralStorage_8h_source.html">CentralStorage.h</a>.</p>

</div>
</div>
<a class="anchor" id="a710a94a5fbcb985594717f0864405872"></a><!-- doxytag: member="CentralStorage::globalPoseGraph" ref="a710a94a5fbcb985594717f0864405872" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classPoseGraph.html">PoseGraph</a> <a class="el" href="classCentralStorage.html#a710a94a5fbcb985594717f0864405872">CentralStorage::globalPoseGraph</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>all local PoseGraphs added together </p>

<p>Definition at line <a class="el" href="CentralStorage_8h_source.html#l00135">135</a> of file <a class="el" href="CentralStorage_8h_source.html">CentralStorage.h</a>.</p>

</div>
</div>
<a class="anchor" id="a3ae59bfa3849b3dd984c636e0a9af23a"></a><!-- doxytag: member="CentralStorage::iGMap" ref="a3ae59bfa3849b3dd984c636e0a9af23a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;int,std::pair &lt;Eigen::Matrix4f, int&gt; &gt; <a class="el" href="classCentralStorage.html#a3ae59bfa3849b3dd984c636e0a9af23a">CentralStorage::iGMap</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>key is the nbr of the queryImg (ImgCtr), iGMap.first: queryImgCtr (queryImgCtr), iGMap.second.first: IG between 2 keyframes, iGMap.second.second: testImgCtr (testImgCtr of matched kFrame) it contains the pose of the TestImg (2nd) relative to the QueryImg (1st) </p>

<p>Definition at line <a class="el" href="CentralStorage_8h_source.html#l00148">148</a> of file <a class="el" href="CentralStorage_8h_source.html">CentralStorage.h</a>.</p>

</div>
</div>
<a class="anchor" id="ab477c78726c58cba1b5b14255700ff64"></a><!-- doxytag: member="CentralStorage::kFrames" ref="ab477c78726c58cba1b5b14255700ff64" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;int,<a class="el" href="structkeyFrame.html">keyFrame</a>&gt; <a class="el" href="classCentralStorage.html#ab477c78726c58cba1b5b14255700ff64">CentralStorage::kFrames</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>kFrames stores the <a class="el" href="structkeyFrame.html">keyFrame</a> Image, its identity number (fID=ImgCtr), the associated robot (rID), the kPts and the bowDescriptor of the <a class="el" href="structkeyFrame.html">keyFrame</a> note that the key of the kFrames map is identical to kFrames[key].fID </p>

<p>Definition at line <a class="el" href="CentralStorage_8h_source.html#l00109">109</a> of file <a class="el" href="CentralStorage_8h_source.html">CentralStorage.h</a>.</p>

</div>
</div>
<a class="anchor" id="a872f54468c1ac5aa5438d3c820cfc5bd"></a><!-- doxytag: member="CentralStorage::localPoseGraphs" ref="a872f54468c1ac5aa5438d3c820cfc5bd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;int,<a class="el" href="classPoseGraph.html">PoseGraph</a>&gt; <a class="el" href="classCentralStorage.html#a872f54468c1ac5aa5438d3c820cfc5bd">CentralStorage::localPoseGraphs</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>the key for accessing the localPoseGraph corresponding to a robot is the corresponding robot ID rID </p>

<p>Definition at line <a class="el" href="CentralStorage_8h_source.html#l00133">133</a> of file <a class="el" href="CentralStorage_8h_source.html">CentralStorage.h</a>.</p>

</div>
</div>
<a class="anchor" id="a9f86101c4abfa538b14ecafbbffb49e8"></a><!-- doxytag: member="CentralStorage::localPoses" ref="a9f86101c4abfa538b14ecafbbffb49e8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;int,std::pair &lt;int,geometry_msgs::PoseStamped&gt; &gt; <a class="el" href="classCentralStorage.html#a9f86101c4abfa538b14ecafbbffb49e8">CentralStorage::localPoses</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>the key for accessing a local Poses (poses of the keyframe concerning the initial pose of the associated robot) corresponds to the the kFrames number (ImgCtr), the std::pair contains the associated rID and the actual Transformation </p>

<p>Definition at line <a class="el" href="CentralStorage_8h_source.html#l00118">118</a> of file <a class="el" href="CentralStorage_8h_source.html">CentralStorage.h</a>.</p>

</div>
</div>
<a class="anchor" id="a77f707a32dbf4d3b76668d2bdb2db060"></a><!-- doxytag: member="CentralStorage::localScales" ref="a77f707a32dbf4d3b76668d2bdb2db060" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;int,std::pair &lt;int,float&gt; &gt; <a class="el" href="classCentralStorage.html#a77f707a32dbf4d3b76668d2bdb2db060">CentralStorage::localScales</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Saves the scales for all robots and all images. IMPORTANT NOTE: only the latest scale is needed for each robot!!!! (current storage-&gt;testImgCtr!!!) &lt;-- Maybe not true (see LSD SLAM 3.5 scale for each keyframe) </p>

<p>Definition at line <a class="el" href="CentralStorage_8h_source.html#l00120">120</a> of file <a class="el" href="CentralStorage_8h_source.html">CentralStorage.h</a>.</p>

</div>
</div>
<a class="anchor" id="a393e5d052d921122176d0ebf0a6cfadb"></a><!-- doxytag: member="CentralStorage::matchedKeyFrames" ref="a393e5d052d921122176d0ebf0a6cfadb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::pair&lt;int,int&gt; <a class="el" href="classCentralStorage.html#a393e5d052d921122176d0ebf0a6cfadb">CentralStorage::matchedKeyFrames</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CentralStorage_8h_source.html#l00143">143</a> of file <a class="el" href="CentralStorage_8h_source.html">CentralStorage.h</a>.</p>

</div>
</div>
<a class="anchor" id="a8382babfd80ae718d4f15ddfa5ef5017"></a><!-- doxytag: member="CentralStorage::matchedKeyFramesMap" ref="a8382babfd80ae718d4f15ddfa5ef5017" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;int,std::pair &lt;int,int&gt; &gt; <a class="el" href="classCentralStorage.html#a8382babfd80ae718d4f15ddfa5ef5017">CentralStorage::matchedKeyFramesMap</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>key is the nbr of the queryImg (ImgCtr) --&gt; access kFrame: storage-&gt;kFrames[ matchedKeyFramesMap[nbr].first ], storage-&gt;kFrames[ matchedKeyFramesMap[nbr].second ] </p>

<p>Definition at line <a class="el" href="CentralStorage_8h_source.html#l00145">145</a> of file <a class="el" href="CentralStorage_8h_source.html">CentralStorage.h</a>.</p>

</div>
</div>
<a class="anchor" id="a8ff5fb67a41c196b5677015e09ff33be"></a><!-- doxytag: member="CentralStorage::matcher" ref="a8ff5fb67a41c196b5677015e09ff33be" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Ptr&lt;DescriptorMatcher&gt; <a class="el" href="classCentralStorage.html#a8ff5fb67a41c196b5677015e09ff33be">CentralStorage::matcher</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CentralStorage_8h_source.html#l00102">102</a> of file <a class="el" href="CentralStorage_8h_source.html">CentralStorage.h</a>.</p>

</div>
</div>
<a class="anchor" id="af2ce7451320774bb90db744fa46493bd"></a><!-- doxytag: member="CentralStorage::matches" ref="af2ce7451320774bb90db744fa46493bd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">vector&lt;of2::IMatch&gt; <a class="el" href="classCentralStorage.html#af2ce7451320774bb90db744fa46493bd">CentralStorage::matches</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CentralStorage_8h_source.html#l00140">140</a> of file <a class="el" href="CentralStorage_8h_source.html">CentralStorage.h</a>.</p>

</div>
</div>
<a class="anchor" id="a83a67f52de30d339d872138243d42764"></a><!-- doxytag: member="CentralStorage::nbrRobots" ref="a83a67f52de30d339d872138243d42764" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classCentralStorage.html#a83a67f52de30d339d872138243d42764">CentralStorage::nbrRobots</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CentralStorage_8h_source.html#l00082">82</a> of file <a class="el" href="CentralStorage_8h_source.html">CentralStorage.h</a>.</p>

</div>
</div>
<a class="anchor" id="a6830253bfbd8a4c03cc317820358d25a"></a><!-- doxytag: member="CentralStorage::nbrVisWords" ref="a6830253bfbd8a4c03cc317820358d25a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classCentralStorage.html#a6830253bfbd8a4c03cc317820358d25a">CentralStorage::nbrVisWords</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CentralStorage_8h_source.html#l00090">90</a> of file <a class="el" href="CentralStorage_8h_source.html">CentralStorage.h</a>.</p>

</div>
</div>
<a class="anchor" id="ae701316885fe7f1366f17ec44393b84b"></a><!-- doxytag: member="CentralStorage::pRobotsWorld" ref="ae701316885fe7f1366f17ec44393b84b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;int,Eigen::Matrix4f&gt; <a class="el" href="classCentralStorage.html#ae701316885fe7f1366f17ec44393b84b">CentralStorage::pRobotsWorld</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>the key for accessing a global poses of the robots (pose of the initial robot COS concerning the world COS) corresponds to the the rID, the map contains the transformation of the associated robot relative to the world COS NOTE: The world COS is identical with the COS of the robot with rID 1!!!!!!!!!! </p>

<p>Definition at line <a class="el" href="CentralStorage_8h_source.html#l00130">130</a> of file <a class="el" href="CentralStorage_8h_source.html">CentralStorage.h</a>.</p>

</div>
</div>
<a class="anchor" id="a98df05b89e7956601eeff266fbef0754"></a><!-- doxytag: member="CentralStorage::ptCls" ref="a98df05b89e7956601eeff266fbef0754" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;int,std::pair &lt;int,pcl::PointCloud&lt;pcl::PointXYZ&gt; &gt; &gt; <a class="el" href="classCentralStorage.html#a98df05b89e7956601eeff266fbef0754">CentralStorage::ptCls</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>the key for accessing a ptCls corresponds to the the kFrames identity number (ImgCtr), the std::pair contains the associated rID and the actual PtCl </p>

<p>Definition at line <a class="el" href="CentralStorage_8h_source.html#l00112">112</a> of file <a class="el" href="CentralStorage_8h_source.html">CentralStorage.h</a>.</p>

</div>
</div>
<a class="anchor" id="ac162077a92cd58a58d19ae7404719490"></a><!-- doxytag: member="CentralStorage::ptClsInGlobalWorldCOS" ref="ac162077a92cd58a58d19ae7404719490" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;int,std::pair &lt;int,pcl::PointCloud&lt;pcl::PointXYZ&gt; &gt; &gt; <a class="el" href="classCentralStorage.html#ac162077a92cd58a58d19ae7404719490">CentralStorage::ptClsInGlobalWorldCOS</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CentralStorage_8h_source.html#l00113">113</a> of file <a class="el" href="CentralStorage_8h_source.html">CentralStorage.h</a>.</p>

</div>
</div>
<a class="anchor" id="a6b25259119c01d07da15d4e5c9f806f8"></a><!-- doxytag: member="CentralStorage::ptClsInGlobalWorldCOSUpdated" ref="a6b25259119c01d07da15d4e5c9f806f8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;int,bool&gt; <a class="el" href="classCentralStorage.html#a6b25259119c01d07da15d4e5c9f806f8">CentralStorage::ptClsInGlobalWorldCOSUpdated</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CentralStorage_8h_source.html#l00114">114</a> of file <a class="el" href="CentralStorage_8h_source.html">CentralStorage.h</a>.</p>

</div>
</div>
<a class="anchor" id="a017fa3b55ed277d63df2a0937be0ead7"></a><!-- doxytag: member="CentralStorage::robotScales" ref="a017fa3b55ed277d63df2a0937be0ead7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;int,float&gt; <a class="el" href="classCentralStorage.html#a017fa3b55ed277d63df2a0937be0ead7">CentralStorage::robotScales</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CentralStorage_8h_source.html#l00124">124</a> of file <a class="el" href="CentralStorage_8h_source.html">CentralStorage.h</a>.</p>

</div>
</div>
<a class="anchor" id="ac721895aafa60a4fb37c9659aabaed7a"></a><!-- doxytag: member="CentralStorage::stopDataCollection" ref="ac721895aafa60a4fb37c9659aabaed7a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classCentralStorage.html#ac721895aafa60a4fb37c9659aabaed7a">CentralStorage::stopDataCollection</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CentralStorage_8h_source.html#l00086">86</a> of file <a class="el" href="CentralStorage_8h_source.html">CentralStorage.h</a>.</p>

</div>
</div>
<a class="anchor" id="ab3aae9d93bbccd2a646330cb8812824f"></a><!-- doxytag: member="CentralStorage::testBOWDescriptors_allRobots" ref="ab3aae9d93bbccd2a646330cb8812824f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cv::Mat <a class="el" href="classCentralStorage.html#ab3aae9d93bbccd2a646330cb8812824f">CentralStorage::testBOWDescriptors_allRobots</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CentralStorage_8h_source.html#l00138">138</a> of file <a class="el" href="CentralStorage_8h_source.html">CentralStorage.h</a>.</p>

</div>
</div>
<a class="anchor" id="ac6ecd35e9f6a9d0145f87fb98c6fb923"></a><!-- doxytag: member="CentralStorage::testImgCtr" ref="ac6ecd35e9f6a9d0145f87fb98c6fb923" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classCentralStorage.html#ac6ecd35e9f6a9d0145f87fb98c6fb923">CentralStorage::testImgCtr</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CentralStorage_8h_source.html#l00139">139</a> of file <a class="el" href="CentralStorage_8h_source.html">CentralStorage.h</a>.</p>

</div>
</div>
<a class="anchor" id="ad22679ec76d8fc9c99226a1bfdd4c410"></a><!-- doxytag: member="CentralStorage::trainBOWDescriptors_allRobots" ref="ad22679ec76d8fc9c99226a1bfdd4c410" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cv::Mat <a class="el" href="classCentralStorage.html#ad22679ec76d8fc9c99226a1bfdd4c410">CentralStorage::trainBOWDescriptors_allRobots</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CentralStorage_8h_source.html#l00093">93</a> of file <a class="el" href="CentralStorage_8h_source.html">CentralStorage.h</a>.</p>

</div>
</div>
<a class="anchor" id="ad574732df5058d95d650c1187a9ba4f6"></a><!-- doxytag: member="CentralStorage::trainDescriptors_allRobots" ref="ad574732df5058d95d650c1187a9ba4f6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cv::Mat <a class="el" href="classCentralStorage.html#ad574732df5058d95d650c1187a9ba4f6">CentralStorage::trainDescriptors_allRobots</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CentralStorage_8h_source.html#l00087">87</a> of file <a class="el" href="CentralStorage_8h_source.html">CentralStorage.h</a>.</p>

</div>
</div>
<a class="anchor" id="a673208fa43bab02c4e53077ae45a38e7"></a><!-- doxytag: member="CentralStorage::trainImgs_allRobots" ref="a673208fa43bab02c4e53077ae45a38e7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">vector&lt;cv::Mat&gt; <a class="el" href="classCentralStorage.html#a673208fa43bab02c4e53077ae45a38e7">CentralStorage::trainImgs_allRobots</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CentralStorage_8h_source.html#l00089">89</a> of file <a class="el" href="CentralStorage_8h_source.html">CentralStorage.h</a>.</p>

</div>
</div>
<a class="anchor" id="a6eba28072f558f36c2b3a08170f9db74"></a><!-- doxytag: member="CentralStorage::trainKPts_allRobots" ref="a6eba28072f558f36c2b3a08170f9db74" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">vector&lt;vector&lt;KeyPoint&gt; &gt; <a class="el" href="classCentralStorage.html#a6eba28072f558f36c2b3a08170f9db74">CentralStorage::trainKPts_allRobots</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CentralStorage_8h_source.html#l00088">88</a> of file <a class="el" href="CentralStorage_8h_source.html">CentralStorage.h</a>.</p>

</div>
</div>
<a class="anchor" id="a50f04d43d8c1f26725bb2e2e560a494c"></a><!-- doxytag: member="CentralStorage::vocabulary" ref="a50f04d43d8c1f26725bb2e2e560a494c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cv::Mat <a class="el" href="classCentralStorage.html#a50f04d43d8c1f26725bb2e2e560a494c">CentralStorage::vocabulary</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="CentralStorage_8h_source.html#l00092">92</a> of file <a class="el" href="CentralStorage_8h_source.html">CentralStorage.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="CentralStorage_8h_source.html">CentralStorage.h</a></li>
<li><a class="el" href="CentralStorage_8cpp_source.html">CentralStorage.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated on Sat May 23 2015 13:37:28 for My Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
